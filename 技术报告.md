# Model Cloud 模型管理系统技术报告

## 一、项目概述

### 1.1 项目背景
Model Cloud 是一个前后端分离的模型管理系统，旨在重新设计并实现原有的模型管理系统，采用现代化的技术架构和开发方式，提供更好的可维护性和扩展性。

### 1.2 技术选型
- **后端**: Spring Boot 3.2.0 + Spring Security + JWT + MyBatis-Flex
- **前端**: Vue 3 + TypeScript + Vite + Element Plus
- **数据库**: MySQL 8.0+ (关系型数据) + MongoDB (非关系型数据)
- **缓存**: Redis
- **版本控制**: Gitea API
- **构建工具**: Maven (后端) + npm (前端)

## 二、项目结构详解

### 2.1 后端项目结构 (model-cloud-backend)

```
model-cloud-backend/
├── pom.xml                                    # Maven项目配置文件
├── README.md                                  # 后端项目说明文档
├── .gitignore                                 # Git忽略文件配置
└── src/
    ├── main/
    │   ├── java/
    │   │   └── com/modelcloud/
    │   │       ├── ModelCloudApplication.java # Spring Boot启动类
    │   │       │
    │   │       ├── common/                   # 通用模块（所有业务模块共享）
    │   │       │   ├── config/               # 配置类目录
    │   │       │   │   ├── SecurityConfig.java      # Spring Security安全配置
    │   │       │   │   └── WebConfig.java            # Web MVC配置（CORS等）
    │   │       │   │
    │   │       │   ├── constant/              # 常量定义目录
    │   │       │   │   └── CommonConstant.java      # 通用常量（状态码、默认值等）
    │   │       │   │
    │   │       │   ├── exception/             # 异常处理目录
    │   │       │   │   ├── BusinessException.java       # 业务异常类
    │   │       │   │   └── GlobalExceptionHandler.java  # 全局异常处理器
    │   │       │   │
    │   │       │   ├── tools/                # 工具类目录（待实现）
    │   │       │   │   # 包含：字符串工具、日期工具、文件工具等
    │   │       │   │
    │   │       │   └── web/                  # Web相关通用类
    │   │       │       ├── domain/
    │   │       │       │   ├── request/
    │   │       │       │   │   └── PageRequest.java      # 分页请求基类
    │   │       │       │   └── response/
    │   │       │       │       ├── Result.java           # 统一响应结果封装
    │   │       │       │       └── ResultCode.java       # 响应码枚举
    │   │       │       │
    │   │       │       └── security/         # 安全相关（JWT工具等，待实现）
    │   │       │
    │   │       └── modules/                  # 业务模块目录
    │   │           │
    │   │           ├── auth/                  # 认证授权模块
    │   │           │   ├── controller/
    │   │           │   │   └── AuthController.java       # 认证控制器（登录、登出、验证码等）
    │   │           │   ├── service/
    │   │           │   │   ├── AuthService.java         # 认证服务接口（待实现）
    │   │           │   │   └── impl/
    │   │           │   │       └── AuthServiceImpl.java # 认证服务实现（待实现）
    │   │           │   └── model/
    │   │           │       └── domain/                   # 认证相关实体（待实现）
    │   │           │
    │   │           ├── business/              # 业务模块（核心业务功能）
    │   │           │   ├── controller/        # 控制器层
    │   │           │   │   ├── BsModelController.java           # 模型管理控制器
    │   │           │   │   ├── BsModelLabelController.java      # 模型标签控制器（待创建）
    │   │           │   │   ├── BsModelCollectController.java    # 模型收藏控制器（待创建）
    │   │           │   │   └── ...                            # 其他业务控制器
    │   │           │   │
    │   │           │   ├── service/           # 服务层
    │   │           │   │   ├── BsModelService.java              # 模型服务接口
    │   │           │   │   └── impl/
    │   │           │   │       └── BsModelServiceImpl.java      # 模型服务实现
    │   │           │   │
    │   │           │   ├── mapper/            # 数据访问层（MyBatis）
    │   │           │   │   ├── BsModelMapper.java              # 模型Mapper接口
    │   │           │   │   ├── BsModelLabelMapper.java          # 模型标签Mapper（待创建）
    │   │           │   │   └── ...                            # 其他Mapper接口
    │   │           │   │
    │   │           │   ├── model/              # 数据模型层
    │   │           │   │   ├── domain/                         # 实体类（对应数据库表）
    │   │           │   │   │   ├── BsModel.java                 # 模型实体
    │   │           │   │   │   ├── BsModelLabel.java           # 模型标签实体
    │   │           │   │   │   ├── BsModelCollect.java         # 模型收藏实体
    │   │           │   │   │   └── ...                        # 其他实体类
    │   │           │   │   │
    │   │           │   │   ├── dto/                             # 数据传输对象（待实现）
    │   │           │   │   ├── vo/                              # 视图对象（待实现）
    │   │           │   │   └── request/                         # 请求对象（待实现）
    │   │           │   │
    │   │           │   └── repository/         # MongoDB仓库（用于非关系型数据）
    │   │           │       ├── BsModelParamsRepository.java    # 模型参数Repository（待创建）
    │   │           │       └── ...                            # 其他Repository
    │   │           │
    │   │           └── sys/                    # 系统管理模块
    │   │               ├── controller/        # 控制器层
    │   │               │   ├── SysUserController.java          # 用户管理控制器
    │   │               │   ├── SysRoleController.java          # 角色管理控制器（待创建）
    │   │               │   ├── SysPowerController.java         # 权限管理控制器（待创建）
    │   │               │   ├── SysFileController.java          # 文件管理控制器（待创建）
    │   │               │   └── ...                            # 其他系统管理控制器
    │   │               │
    │   │               ├── service/           # 服务层
    │   │               │   ├── SysUserService.java             # 用户服务接口（待创建）
    │   │               │   └── impl/
    │   │               │       └── SysUserServiceImpl.java     # 用户服务实现（待创建）
    │   │               │
    │   │               ├── mapper/            # 数据访问层
    │   │               │   ├── SysUserMapper.java              # 用户Mapper接口（待创建）
    │   │               │   └── ...                            # 其他Mapper接口
    │   │               │
    │   │               └── model/             # 数据模型层
    │   │                   └── domain/                         # 实体类
    │   │                       ├── SysUser.java                 # 用户实体
    │   │                       ├── SysRole.java                 # 角色实体
    │   │                       ├── SysPower.java                # 权限实体
    │   │                       ├── SysFile.java                # 文件实体
    │   │                       └── ...                        # 其他实体类
    │   │
    │   └── resources/            # 资源文件目录
    │       ├── application.yml                 # 主配置文件
    │       ├── application-dev.yml             # 开发环境配置
    │       ├── application-prod.yml            # 生产环境配置
    │       └── mapper/                         # MyBatis XML映射文件
    │           ├── business/
    │           │   └── BsModelMapper.xml       # 模型Mapper XML（自定义SQL）
    │           └── sys/
    │               └── ...                     # 其他Mapper XML文件
    │
    └── test/                    # 测试代码目录（待实现）
        └── java/
            └── com/modelcloud/
                └── ...                        # 单元测试和集成测试
```

### 2.2 前端项目结构 (model-cloud-frontend)

```
model-cloud-frontend/
├── package.json                # npm项目配置文件
├── vite.config.ts              # Vite构建工具配置
├── tsconfig.json               # TypeScript编译配置
├── tsconfig.node.json          # Node环境TypeScript配置
├── index.html                  # HTML入口文件
├── README.md                   # 前端项目说明文档
├── .gitignore                  # Git忽略文件配置
└── src/
    ├── main.ts                 # 应用入口文件
    ├── App.vue                  # 根组件
    ├── style.css               # 全局样式文件
    │
    ├── api/                    # API接口目录
    │   ├── request.ts          # Axios请求封装（拦截器、错误处理等）
    │   ├── auth.ts             # 认证相关API
    │   ├── model.ts            # 模型相关API
    │   ├── user.ts             # 用户相关API（待创建）
    │   └── ...                 # 其他业务API
    │
    ├── assets/                 # 静态资源目录（待创建）
    │   ├── images/             # 图片资源
    │   ├── icons/              # 图标资源
    │   └── fonts/              # 字体资源
    │
    ├── components/             # 公共组件目录（待创建）
    │   ├── common/             # 通用组件
    │   │   ├── PageHeader.vue  # 页面头部组件（待创建）
    │   │   ├── PageTable.vue   # 表格组件（待创建）
    │   │   └── ...             # 其他通用组件
    │   └── business/           # 业务组件
    │       └── ...             # 业务相关组件
    │
    ├── layouts/                # 布局组件目录
    │   └── MainLayout.vue       # 主布局组件（侧边栏+顶部栏+内容区）
    │
    ├── router/                 # 路由配置目录
    │   └── index.ts            # 路由配置文件（路由定义、路由守卫等）
    │
    ├── stores/                 # 状态管理目录（Pinia）
    │   ├── user.ts             # 用户状态管理
    │   ├── app.ts              # 应用全局状态（待创建）
    │   └── ...                 # 其他状态管理模块
    │
    └── views/                  # 页面组件目录
        ├── auth/               # 认证相关页面
        │   └── Login.vue       # 登录页面
        │
        ├── dashboard/          # 仪表盘页面
        │   └── Home.vue        # 首页
        │
        ├── business/           # 业务页面（待创建）
        │   ├── model/          # 模型管理页面
        │   │   ├── ModelList.vue      # 模型列表页（待创建）
        │   │   ├── ModelDetail.vue    # 模型详情页（待创建）
        │   │   └── ModelForm.vue      # 模型表单页（待创建）
        │   └── ...             # 其他业务页面
        │
        └── system/             # 系统管理页面（待创建）
            ├── user/           # 用户管理页面
            ├── role/           # 角色管理页面
            └── ...             # 其他系统管理页面
```

## 三、核心模块说明

### 3.1 后端核心模块

#### 3.1.1 通用模块 (common)
- **config/**: 存放所有配置类，包括安全配置、Web配置等
- **constant/**: 存放常量定义，避免硬编码
- **exception/**: 统一异常处理，提供友好的错误响应
- **web/domain/**: 统一的请求和响应对象，保证接口规范

#### 3.1.2 认证模块 (auth)
- 负责用户登录、登出、Token管理
- 集成JWT实现无状态认证
- 提供验证码功能

#### 3.1.3 业务模块 (business)
- **模型管理**: 模型的增删改查、审核、发布等功能
- **模型分类**: 模型分类的层级管理
- **模型标签**: 标签的创建和管理
- **模型收藏**: 用户收藏模型功能
- **模型参数**: 使用MongoDB存储模型的复杂参数结构
- **模型模板**: 使用MongoDB存储模型模板信息
- **Gitea集成**: 与Gitea进行版本控制集成

#### 3.1.4 系统模块 (sys)
- **用户管理**: 用户的增删改查、启用禁用
- **角色管理**: 角色的创建和权限分配
- **权限管理**: 权限的树形结构管理
- **文件管理**: 文件的上传、下载、删除
- **日志管理**: 操作日志的记录和查询
- **系统监控**: 系统资源监控（CPU、内存、磁盘等）

### 3.2 前端核心模块

#### 3.2.1 API层 (api)
- **request.ts**: Axios实例封装，包含请求/响应拦截器
- 各业务模块的API接口定义

#### 3.2.2 状态管理 (stores)
- 使用Pinia进行状态管理
- 用户信息、Token等全局状态

#### 3.2.3 路由管理 (router)
- 路由定义和路由守卫
- 权限控制

#### 3.2.4 页面组件 (views)
- 按功能模块组织页面组件
- 业务页面和系统管理页面分离

## 四、技术实现要点

### 4.1 后端技术要点

1. **Spring Security + JWT**
   - 无状态认证，使用JWT Token
   - 配置CORS支持跨域请求
   - 接口权限控制

2. **MyBatis-Flex**
   - 简化MyBatis配置
   - 支持逻辑删除
   - 灵活的查询构建

3. **MongoDB集成**
   - 用于存储非结构化数据（模型参数、模板等）
   - 使用Spring Data MongoDB

4. **Redis缓存**
   - 缓存热点数据
   - Session管理（如需要）

5. **统一响应格式**
   - 使用Result类封装所有接口响应
   - 统一的错误码和错误信息

### 4.2 前端技术要点

1. **Vue 3 Composition API**
   - 使用setup语法糖
   - 更好的TypeScript支持

2. **TypeScript**
   - 类型安全
   - 更好的代码提示和错误检查

3. **Element Plus**
   - 丰富的UI组件
   - 响应式设计

4. **Axios拦截器**
   - 自动添加Token
   - 统一错误处理
   - 请求/响应日志

5. **路由守卫**
   - 登录状态检查
   - 权限验证

## 五、数据库设计说明

### 5.1 MySQL数据库（关系型数据）

主要表结构：
- **bs_model**: 模型基本信息表
- **bs_model_label**: 模型标签表
- **bs_model_collect**: 模型收藏表
- **bs_model_classify**: 模型分类表
- **sys_user**: 系统用户表
- **sys_role**: 系统角色表
- **sys_user_role**: 用户角色关联表
- **sys_log**: 系统日志表

### 5.2 MongoDB数据库（非关系型数据）

主要集合：
- **bs_model_params**: 模型参数集合（存储JSON格式的复杂参数）
- **model_template**: 模型模板集合

## 六、配置文件说明

### 6.1 后端配置文件

- **application.yml**: 主配置文件，包含数据库、Redis、MongoDB等基础配置
- **application-dev.yml**: 开发环境配置
- **application-prod.yml**: 生产环境配置（支持环境变量）

### 6.2 前端配置文件

- **vite.config.ts**: Vite构建配置，包含代理设置
- **tsconfig.json**: TypeScript编译配置

## 七、开发规范

### 7.1 代码规范
- 遵循Java和TypeScript的编码规范
- 使用Lombok简化Java代码
- 统一使用Result类作为接口返回值

### 7.2 命名规范
- 控制器: XxxController
- 服务接口: XxxService
- 服务实现: XxxServiceImpl
- Mapper接口: XxxMapper
- 实体类: 与数据库表名对应（驼峰命名）

### 7.3 接口规范
- RESTful API设计
- 统一使用/api作为接口前缀
- 使用HTTP状态码和业务状态码

## 八、待实现功能清单

### 8.1 后端待实现
1. JWT Token生成和验证
2. 各业务模块的Service和Controller实现
3. 文件上传下载功能
4. Gitea API集成
5. 系统监控功能
6. 日志记录功能
7. 权限验证拦截器
8. 参数校验
9. 单元测试和集成测试

### 8.2 前端待实现
1. 完整的页面组件
2. 表格、表单等通用组件
3. 权限控制
4. 文件上传组件
5. 数据可视化
6. 响应式布局优化
7. 错误处理优化
8. 国际化支持（如需要）

## 九、部署说明

### 9.1 环境要求
- JDK 17+
- Node.js 18+
- MySQL 8.0+
- MongoDB 6.0+
- Redis 6.0+

### 9.2 部署步骤
1. 创建数据库和表结构
2. 配置application.yml中的数据库连接
3. 启动后端服务
4. 安装前端依赖并构建
5. 配置Nginx反向代理（生产环境）

## 十、后续优化建议

1. **性能优化**
   - 数据库索引优化
   - Redis缓存策略优化
   - 前端代码分割和懒加载

2. **安全加固**
   - 接口限流
   - SQL注入防护
   - XSS防护
   - CSRF防护

3. **功能增强**
   - 消息通知系统
   - 数据导入导出
   - 批量操作
   - 高级搜索

4. **监控和运维**
   - 集成APM监控
   - 日志聚合和分析
   - 自动化部署

## 十一、总结

本项目采用前后端分离的架构设计，使用现代化的技术栈，提供了清晰的代码结构和良好的扩展性。框架已经搭建完成，各模块的目录结构和基础文件已创建，为后续的功能开发打下了坚实的基础。
---

**报告生成时间**: 2025-01-09  
**项目版本**: 1.0.0  
**文档维护**: 请及时更新本文档以反映项目的最新状态



























